(this.webpackJsonpwebmap=this.webpackJsonpwebmap||[]).push([[0],{29:function(e,t,r){},47:function(e,t,r){},49:function(e,t,r){},50:function(e,t,r){"use strict";r.r(t);var n=r(11),c=r.n(n),a=r(4),i=r(21),s=r(0),o=r(20),l=r(5),u=r(22),d=r(53),j=r(55),f=r(56),b=r(54),m=r(1),h=function(e){return Object(m.jsx)("div",{className:"map-legend",children:Object(m.jsx)("table",{children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{className:!e.selected&&"selected",onClick:function(){return e.onSelect()},children:[Object(m.jsx)("td",{children:Object(m.jsx)("span",{className:"dot orient"})}),Object(m.jsx)("td",{children:Object(m.jsx)("label",{children:"All works"})})]}),e.index.markers.map((function(t){return Object(m.jsxs)("tr",{className:e.selected===t&&"selected",onClick:function(){return e.onSelect(t)},children:[Object(m.jsx)("td",{children:Object(m.jsx)("span",{className:"dot non-orient"})}),Object(m.jsx)("td",{children:Object(m.jsx)("label",{children:t})})]},t)}))]})})})},O=(r(28),r(29),{stroke:!0,color:"#4e4e4e",weight:1.5,opacity:1,fill:!0,fillColor:"#b7b7b7",fillOpacity:1}),x=Object(l.a)(Object(l.a)({},O),{},{color:"#bf7814",fillColor:"#ff9a1e"}),p=function(e){var t=Object(u.a)(e);return[t.slice(0,2).slice().reverse(),t.slice(2).slice().reverse()]},v=function(e){var t=e.data,r=e.index,n=e.timerange,c=Object(s.useState)(),i=Object(a.a)(c,2),o=i[0],l=i[1],u=null===t||void 0===t?void 0:t.features.filter((function(e){return"Point"===(null===e||void 0===e?void 0:e.geometry.type)})),v=n?u.filter((function(e){var t=n.min,r=n.max,c=e.properties,a=c.earliest,i=c.latest;return a<=r&&i>=t})):u;return Object(m.jsx)(m.Fragment,{children:v&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(d.a,{bounds:p(t),preferCanvas:!0,children:[Object(m.jsx)(j.a,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}),v.map((function(e,t){var r=function(e){var t=n?e.records.filter((function(e){return e.year>=n.min&&e.year<=n.max})):e.records,r=o?t.filter((function(e){return e.markers.includes(o)})):t;return{outer:Math.max(3,t.length/2.5),inner:Math.max(3,r.length/2.5)}}(e),c=r.outer,a=r.inner;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(f.a,{center:e.geometry.coordinates.slice().reverse(),radius:c,pathOptions:O},"".concat(t,"-outer")),o&&a>0&&Object(m.jsx)(f.a,{center:e.geometry.coordinates.slice().reverse(),radius:a,pathOptions:x,children:Object(m.jsxs)(b.a,{children:[Object(m.jsx)("a",{href:e.properties.geonames_uri,children:e.properties.placename})," ",Object(m.jsx)("br",{}),e.properties.num_works," works"]})},"".concat(t,"-inner"))]})}))]}),Object(m.jsx)(h,{index:r,selected:o,onSelect:function(e){return l(e)}})]})})},g=r(17),k=r.n(g),y=(r(47),r(48),function(e){var t=e.data[0],r=e.data[e.data.length-1],n=Object(s.useState)({min:t,max:r}),c=Object(a.a)(n,2),i=c[0],o=c[1],l=function(e){return(e-t)/(r-t)*100};return Object(m.jsx)("div",{className:"t6e-timeline",children:Object(m.jsxs)("div",{className:"t6e-timeline-inner",children:[Object(m.jsx)("div",{className:"t6e-ticks",children:e.data.map((function(e){return Object(m.jsx)("div",{className:"t6e-tick-wrapper",style:{left:"".concat(l(e),"%")},children:Object(m.jsx)("div",{className:"t6e-tick"})},e)}))}),Object(m.jsx)(k.a,{draggableTrack:!0,minValue:t,maxValue:r,value:i,onChange:function(n){var c={min:Math.max(t,n.min),max:Math.min(r,n.max)};o(c),e.onChange(n)}})]})})}),w=r(18),N=r(19),S=function(){function e(t){var r=this;Object(w.a)(this,e),this.findByMarker=function(e){return r._byMarker[e]};var n=t.features.filter((function(e){return"Point"===(null===e||void 0===e?void 0:e.geometry.type)})),c={};n.forEach((function(e){var t;(t=e,Array.from(t.records.reduce((function(e,t){return t.markers.forEach((function(t){return e.add(t)})),e}),new Set))).forEach((function(t){var r=c[t];r?r.push(e):c[t]=[e]}))})),this._features=n,this._byMarker=c}return Object(N.a)(e,[{key:"features",get:function(){return this._features}},{key:"markers",get:function(){return Object.keys(this._byMarker).slice().sort()}}]),e}(),M=(r(49),function(e){var t=e.features.reduce((function(e,t){return t.records.forEach((function(t){return e.add(t.year)})),e}),new Set);return Object(i.a)(Array.from(t).slice().sort())}),_=function(){var e=Object(o.a)("map.json",(function(e){return fetch(e).then((function(e){return e.json()}))})).data,t=Object(s.useState)(),r=Object(a.a)(t,2),n=r[0],c=r[1],i=e?new S(e):null;return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(v,{data:e,index:i,timerange:n}),e&&Object(m.jsx)(y,{data:M(e),onChange:function(e){return c(e)}})]})},C=r(3),I=r.n(C);delete I.a.Icon.Default.prototype._getIconUrl,I.a.Icon.Default.mergeOptions({iconRetinaUrl:"images/leaflet/marker-icon-2x.png",iconUrl:"images/leaflet/marker-icon.png",shadowUrl:"images/leaflet/marker-shadow.png"}),c.a.render(Object(m.jsx)(_,{}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.8e2350bb.chunk.js.map